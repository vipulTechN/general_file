<script>
        const Name2 = document.getElementById("username2")
  , Email2 = document.getElementById("useremail2")
  , Phone2 = document.getElementById("userphone2")
  , Message2 = document.getElementById("usermessage2")
  , Propdetail2 = document.getElementById("Propdetail2")
  , usercontact2 = document.getElementById("usercontact2")
  , Form2 = document.getElementById("PropContactform2")
  , SubmitButton2 = document.getElementById("contactsubmit2")
  , csrftoken2 = document.querySelector("[name=csrfmiddlewaretoken]").value
  , Namevalid2 = document.getElementById("isnamevalid2")
  , Nameinvalid2 = document.getElementById("isnameinvalid2")
  , Emailvalid2 = document.getElementById("isemailvalid2")
  , Emailinvalid2 = document.getElementById("isemailinvalid2")
  , Phonevalid2 = document.getElementById("isphonevalid2")
  , Phoneinvalid2 = document.getElementById("isphoneinvalid2")
  , Messagevalid2 = document.getElementById("ismessagevalid2")
  , Messageinvalid2 = document.getElementById("ismessageinvalid2")
  , issuccess2 = document.getElementById("issuccess2")
  , FailureAlert2 = document.getElementById("isfailure2");
sendOtpDivone = document.getElementById("sendotpdivone"),
verifyOtpDivone = document.getElementById("verifyotpdivone"),
otpInputone = document.getElementById("otpinputone"),
otpResultone = document.getElementById("otpResultone"),
phoneErrorone = document.getElementById("phoneErrorone"),
otpErrorone = document.getElementById("otpErrorone"),
otpSuccessone = document.getElementById("otpSuccessone");
let validName2 = !1
  , validEmail2 = !1
  , validPhone2 = !1
  , validMessage2 = !1
  , otpSentone = !1
  , otpVerifiedone = !1
  , generatedOtpone = "";
function generateOtpone() {
    return Math.floor(1e3 + 9e3 * Math.random()).toString()
}
function sendOtpone() {
    let e = Phone2.value;
    if ("" === e)
        Phone2.style.borderBottom = "2px solid red",
        phoneErrorone.innerText = "Enter your phone number to send OTP",
        phoneErrorone.style.display = "block";
    else {
        generatedOtpone = generateOtpone(),
        otpSentone = !0;
        var t = new XMLHttpRequest;
        t.onreadystatechange = function() {
            4 == this.readyState && 200 == this.status && this.responseText.includes("success") ? (otpResultone.style.color = "green",
            otpResultone.innerText = "OTP sent successfully!",
            sendOtpDivone.style.display = "none",
            verifyOtpDivone.style.display = "flex") : (otpResultone.style.color = "red",
            otpResultone.innerText = "Failed to send OTP.",
            sendOtpDivone.style.display = "flex",
            verifyOtpDivone.style.display = "none")
        }
        ;
        var l = "https://www.fast2sms.com/dev/bulkV2?authorization=E2SO3Qc7HLJc7foeIWZrM8CAGhMFVV07L5YU9ZpykVYCWQ4BhTEBocweBqy6&variables_values=" + generatedOtpone + "&route=otp&numbers=" + encodeURIComponent(e);
        t.open("GET", l, !0),
        t.send(),
        phoneErrorone.style.display = "none"
    }
}
function verifyOtpone() {
    let e = otpInputone.value;
    "" === e ? (otpInputone.style.borderBottom = "2px solid red",
    otpErrorone.innerText = "Enter the OTP to verify",
    otpErrorone.style.display = "block") : e === generatedOtpone ? (otpVerifiedone = !0,
    otpErrorone.style.display = "none",
    otpInputone.style.borderBottom = "",
    otpSuccessone.innerText = "OTP verified successfully!",
    otpSuccessone.style.display = "block",
    otpResultone.style.display = "none",
    otpInputone.setAttribute("readonly", !0)) : (otpInputone.style.borderBottom = "2px solid red",
    otpErrorone.innerText = "Invalid OTP, please try again.",
    otpErrorone.style.display = "block",
    otpSuccessone.style.display = "none")
}
function Refresh() {
    setTimeout(()=>{
        location.reload()
    }
    , 1e3)
}
Name2.addEventListener("blur", ()=>{
    let e = Name2.value;
    /^[a-z\sA-z]{3,30}$/.test(e) ? (Namevalid2.style.display = "block",
    Nameinvalid2.style.display = "none",
    validName2 = !0) : (Nameinvalid2.style.display = "block",
    Namevalid2.style.display = "none")
}
),
Email2.addEventListener("blur", ()=>{
    let e = Email2.value;
    /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)$/.test(e) ? (Emailvalid2.style.display = "block",
    Emailinvalid2.style.display = "none",
    validEmail2 = !0) : (Emailvalid2.style.display = "none",
    Emailinvalid2.style.display = "block")
}
),
Phone2.addEventListener("blur", ()=>{
    let e = Phone2.value;
    /^[0-9]{10}$/.test(e) ? (Phonevalid2.style.display = "block",
    Phoneinvalid2.style.display = "none",
    validPhone2 = !0) : (Phonevalid2.style.display = "none",
    Phoneinvalid2.style.display = "block")
}
),
Message2.addEventListener("blur", ()=>{
    let e = Message2.value;
    /[a-zA-Z]/.test(e) ? (Messagevalid2.style.display = "block",
    Messageinvalid2.style.display = "none",
    validMessage2 = !0) : (Messagevalid2.style.display = "none",
    Messageinvalid2.style.display = "block")
}
),
Form2.addEventListener("submit", e=>{
    if (e.preventDefault(),
    !1 === otpSentone) {
        Phone2.style.borderBottom = "2px solid red",
        phoneErrorone.innerText = "Send OTP to verify your number",
        phoneErrorone.style.display = "block";
        return
    }
    if (!1 === otpVerifiedone) {
        otpInputone.style.borderBottom = "2px solid red",
        otpErrorone.innerText = "Verify OTP before submitting",
        otpErrorone.style.display = "block";
        return
    }
    validName2 && validPhone2 && otpSentone && otpVerifiedone ? fetch("/propertycontactdata/", {
        method: "POST",
        body: JSON.stringify({
            Name: Name2.value,
            Email: Email2.value,
            Phone: Phone2.value,
            Message: Message2.value,
            Propdetail: Propdetail2.value,
            User: usercontact2.value
        }),
        headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": csrftoken2
        }
    }).then(e=>e.json()).then(e=>{
        e.success ? (Form2.reset(),
        issuccess2.style.display = "block",
        FailureAlert2.style.display = "none",
        Refresh()) : (Form2.reset(),
        FailureAlert2.style.display = "block",
        issuccess2.style.display = "none",
        Refresh())
    }
    ).catch(()=>{
        Form2.reset(),
        FailureAlert2.style.display = "block",
        issuccess2.style.display = "none",
        console.error("Form submission error: ", error)
    }
    ) : (FailureAlert2.style.display = "block",
    issuccess2.style.display = "none")
}
);

     </script>